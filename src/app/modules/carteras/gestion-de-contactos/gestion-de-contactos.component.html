<div class="containerr pt-2 row">
  <!-- <div class="px-2 mt-2 pb-4 row"> -->
  <div class="col-lg-7 col-md-7 col-sm-7 mx-2" style="max-height: 600px; overflow: auto;">
    <mat-card>
      <mat-card-header>
        <button style="margin-top: -5px;" mat-icon-button color="accent" (click)="goBack()">
          <mat-icon>keyboard_return</mat-icon>
        </button>
        <h2>Datos del contacto </h2>
      </mat-card-header>
      <mat-card-content>
        <div class="row">
          <!-- <div class="row" style="margin-left: 0px;border: solid 1px #000;"> -->
          <div class="row">
            <div class="col-lg-12">
              <div class="row">
                <div class="col-lg-4 my-2">
                  <div class="bold">Nombre</div>
                  <div class="px-2">{{ nombre }}</div>
                </div>
                <div class="col-lg-4 my-2">
                  <div class="bold">Identificacion</div>
                  <div class="px-2">{{ identificacion }}</div>
                </div>
              </div>

              <div class="row">
                <div class="col-lg-4 my-2">
                  <div class="bold">Cuenta</div>
                  <div class="px-2">{{ cuenta }}</div>
                </div>

                <div class="col-lg-4 my-2">
                  <div class="bold">Cartera</div>
                  <div class="px-2">{{ cartera }}</div>
                </div>

                <div class="col-lg-4 my-2">
                  <div class="bold">Ultima Gestion</div>
                  <div class="px-2">
                    {{ ultimaGestion | date : "dd/MM/YYYY" }}
                    {{ ultimaGestion | date : "hh:mm:ss":"GMT / UTC" }}
                  </div>
                </div>
              </div>

              <div class="row">
                <!-- <div class="col-lg-6 my-2">
                  <div class="bold">Ultima Gestion</div>
                  <div class="px-2">
                    {{ ultimaGestion | date : "dd/MM/YYYY" }}
                    {{ ultimaGestion | date : "hh:mm:ss" }}
                  </div>
                </div> -->

                <!-- <div class="col-lg-6 my-2">
                  <div class="bold">Agente</div>
                  <div class="px-2">{{ Agente }}</div>
                </div> -->
              </div>
              <div class="row">
                <div class="col-lg-4 my-2">
                  <div class="bold">Agente</div>
                  <div class="px-2">{{ Agente }}</div>
                </div>

                <div class="col-lg-4 my-2">
                  <div class="bold">Ultima Accion</div>
                  <div class="px-2">{{ ultimaAccion }}</div>
                </div>
                <div class="col-lg-4 my-2">
                  <div class="bold">Ultimo Resultado</div>
                  <div class="px-2">{{ ultimoResultado }}</div>
                </div>

              </div>

              <div class="row">
                <div class="col-lg-4 my-2">
                  <div class="bold">Ultima Tipificacion</div>
                  <div class="px-2">{{ ultimaTipificacion }}</div>
                </div>

                <div class="col-lg-4 my-2">
                  <div class="bold">Ultima SubTipificacion</div>
                  <div class="px-2">{{ ultimaSubtipificacion }}</div>
                </div>

                <div class="col-lg-4 my-2">
                  <div class="bold">Saldo Lempiras</div>
                  <div class="px-2">{{ saldoLempiras }}</div>
                </div>
              </div>

              <div class="roe">
                <div class="col-lg-4 my-2">
                  <div class="bold">Saldo Dolares</div>
                  <div class="px-2">{{ saldoDolares }}</div>
                </div>
              </div>
            </div>

            <!-- <div class="col-lg-7">
            <h3 class="bold">Gestion</h3>
            <mat-form-field appearance="outline" class="w-50 px-1 ">
              <mat-label>Telefono</mat-label>
              <mat-select [(ngModel)]="telefonoID">
                <mat-option></mat-option>
                <mat-option *ngFor="let accion of ListaTelefonos" [value]="accion.TELEFONOID" >
                  {{ accion.TELEFONO }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-50 px-1 ">
              <mat-label>Accion</mat-label>
              <mat-select [(ngModel)]="accionID" (ngModelChange)="onAccionChange()" required>
                <mat-option></mat-option>
                <mat-option *ngFor="let accion of ListaAccion" [value]="accion.ACCIONID">
                  {{ accion.ACCION }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-50 px-1 ">
              <mat-label>Resultado</mat-label>
              <mat-select [(ngModel)]="resultadoID" required>
                <mat-option></mat-option>
                <mat-option *ngFor="let resultado of ListaResultado" [value]="resultado.RESULTADOID">
                  {{ resultado.RESULTADO }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-50 px-1 ">
              <mat-label>Tipificacion</mat-label>
              <mat-select [(ngModel)]="tipificacionID" (ngModelChange)="onTipificacionChange()" required>
                <mat-option></mat-option>
                <mat-option *ngFor="let tipificacion of ListaTipificacion" [value]="tipificacion.TIPIFICACIONID">
                  {{ tipificacion.TIPIFICACION }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-50 px-1 ">
              <mat-label>Subtipificacion</mat-label>
              <mat-select [(ngModel)]="subtipificacionID" required>
                <mat-option></mat-option>
                <mat-option *ngFor="let stipificacion of ListaSubtipificacion"
                  [value]="stipificacion.SUBTIPIFICACIONID">
                  {{ stipificacion.SUBTIPIFICACION }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <div [ngClass]="{'hidden': !divPromesa}">

              <mat-form-field appearance="outline" class="w-50 px-1">
                <mat-label>Fecha Promesa</mat-label>
                <input matInput [matDatepicker]="picker2" [(ngModel)]="fechaPromesa" [min]="getFechaMinima()">
                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" class="w-50 px-1 my-2">
                <mat-label>Valor Promesa</mat-label>
                <input matInput [(ngModel)]="valorPromesa" type="number" />
              </mat-form-field>
            </div>


            <mat-form-field appearance="outline" class="w-50 px-1 ">
              <mat-label>Razon de Mora</mat-label>
              <mat-select [(ngModel)]="razonMoraID" >

                <mat-option></mat-option>
                <mat-option *ngFor="let tipificacion of OpcionesRazonMora" [value]="tipificacion.RAZONMORAID">
                  {{ tipificacion.RAZON }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-50 px-1">
              <mat-label>Fecha Proxima Gestion</mat-label>
              <input matInput [matDatepicker]="picker" [(ngModel)]="fechaProximaGestion" [min]="getFechaMinima()">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>



            <div class="col-lg-12 w-100">
              <mat-form-field appearance="outline" class="w-100 my-2">
                <mat-label>Observacion</mat-label>
                <textarea matInput rows="3" [(ngModel)]="observacion"></textarea>
              </mat-form-field>

              <mat-card-actions>
                <button mat-raised-button class="bgops-indigo txtwhite mx-2" type="submit" (click)="SaveGestion()">
                  Crear
                </button>
                <button mat-raised-button color="warn" class="mx-2" (click)="goBack()">
                  Cancelar
                </button>
              </mat-card-actions>
            </div>
          </div> -->
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <!-- <div class="row">
              <div class="col-lg-12"> -->
            <!-- <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
                <mat-button-toggle value="bold" (click)="genDetalles()">Detalles</mat-button-toggle>
                <mat-button-toggle value="bold" (click)="genListaHistorial()">Historial</mat-button-toggle>
                <mat-button-toggle value="bold" (click)="genListaTelefonos()">Telefonos</mat-button-toggle>
                <mat-button-toggle value="bold" (click)="genListaDirecciones()">Direcciones</mat-button-toggle>
                <mat-button-toggle value="bold" (click)="genListaCorreos()">Correos</mat-button-toggle>f
                <mat-button-toggle value="italic" (click)="genListaPromesas()">Promesas</mat-button-toggle>
                <mat-button-toggle value="bold" (click)="genListaRazonMora()">Razon Mora</mat-button-toggle>
                <mat-button-toggle value="underline" (click)="genListaPagos()">Pagos</mat-button-toggle>
                <mat-button-toggle value="bold" (click)="genListaConfirmaciones()">Confirmaciones</mat-button-toggle>
              </mat-button-toggle-group> -->
            <!-- <div > -->
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genDetalles()">Detalles</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaHistorial()">Historial</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaTelefonos()">Telefonos</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaDirecciones()">Direcciones</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaCorreos()">Correos</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaPromesas()">Promesas</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaRazonMora()">Razon Mora</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaPagos()">Pagos</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaConfirmaciones()">Confirmaciones</button>
            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaSocial()">Social</button>

            <button style="font-size: 10px; padding-left: 5px; padding-right: 5px;" mat-stroked-button
              (click)="genListaWhatsapp()">Whatsapp</button>
            <!-- </div> -->
            <!-- </div>
              </div> -->
            <!-- <table class="table" [ngClass]="{'hidden': !tablaDetalle}">
              <thead>
                <tr>
                  <th>Campo</th>
                  <th>Detalle</th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let dato of ListaDetalles">
                  <tr>
                    <td>CARTERA</td>
                    <td>{{ dato.CARTERA }}</td>
                  </tr>
                  <tr>
                    <td>CARTERAID</td>
                    <td>{{ dato.CARTERAID }}</td>
                  </tr>
                  <tr>
                    <td>CUENTAID</td>
                    <td>{{ dato.CUENTAID }}</td>
                  </tr>
                  <tr>
                    <td>CUENTA</td>
                    <td>{{ dato.CUENTA }}</td>
                  </tr>

                  <tr>
                    <td>IDENTIFICACION</td>
                    <td>{{ dato.IDENTIFICACION }}</td>
                  </tr>
                  <tr>
                    <td>NOMBRE</td>
                    <td>{{ dato.NOMBRE }}</td>
                  </tr>
                  <tr>
                    <td>PROYECTO</td>
                    <td>{{ dato.PROYECTO }}</td>
                  </tr>
                  <tr>
                    <td>TIPOCARTERA</td>
                    <td>{{ dato.TIPOCARTERA }}</td>
                  </tr>
                  <tr>
                    <td>ACCION</td>
                    <td>{{ dato.ACCION }}</td>
                  </tr>
                  <tr>
                    <td>RESULTADO</td>
                    <td>{{ dato.RESULTADO }}</td>
                  </tr>
                  <tr>
                    <td>TIPIFICACION</td>
                    <td>{{ dato.TIPIFICACION }}</td>
                  </tr>
                  <tr>
                    <td>SUBTIPIFICACION</td>
                    <td>{{ dato.SUBTIPIFICACION }}</td>
                  </tr>
                  <tr>
                    <td>Fecha ultima gestion</td>
                    <td>
                      {{ dato.CREACION | date:'dd/MM/YYYY' }}
                      {{ dato.CREACION | date:'hh:mm:ss':'GMT / UTC' }}
                    </td>
                  </tr>
                  <tr>
                    <td>Saldo Lempiras</td>
                    <td>{{ dato.SALDOLEMPIRAS }}</td>
                  </tr>
                  <tr>
                    <td>Saldo Dolares</td>
                    <td>{{ dato.SALDODOLARES }}</td>
                  </tr>
                  <tr>
                    <td>USUARIO</td>
                    <td>{{ dato.USUARIO }}</td>
                  </tr>
                </ng-container>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="9">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </tbody>
            </table> -->

            <table class="table" [ngClass]="{'hidden': !tablaDetalle}">
              <tbody>
                <ng-container *ngFor="let dato of ListaDetalles">
                  <tr *ngFor="let propiedad of getPropiedades(dato)">
                    <td>{{ propiedad }}</td>
                    <td>{{ dato[propiedad] }}</td>
                  </tr>
                </ng-container>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="2">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </tbody>
            </table>
            
            


            <!-- Tabla con paginación -->
            <!-- <table class="table" [ngClass]="{'hidden': !tablaHistorial}">
            <thead>
              <tr>
                <th>Accion</th>
                <th>Resultado</th>
                <th>CuentaID</th>
                <th>Tipificacion</th>
                <th>Subtipificacion</th>
                <th>Comentario</th>
                <th>Creacion</th>
                <th>Usuario</th>
                <th>Tipo</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="
                  let dato of datosFiltrados
                    | slice
                      : (paginaActual - 1) * tamanoPagina
                      : paginaActual * tamanoPagina
                ">
                <td>{{ dato.ACCION }}</td>
                <td>{{ dato.RESULTADO }}</td>
                <td>{{ dato.CUENTAID }}</td>
                <td>{{ dato.TIPIFICACION }}</td>
                <td>{{ dato.SUBTIPIFICACION }}</td>
                <td>{{ dato.COMENTARIO }}</td>
                <td>
                  {{ dato.CREACION | date : "dd/MM/YYYY" }}
                  {{ dato.CREACION | date : "hh:mm:ss" }}
                </td>
                <td>{{ dato.USUARIO }}</td>
                <td>{{ dato.TIPO }}</td>
              </tr>
            </tbody>
          </table> -->
            <!-- tabla historial -->
            <div class="table-responsive" [ngClass]="{'hidden': !tablaHistorial}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput [(ngModel)]="filtro" (keyup)="Filtrar($event, DataSourceHistorial)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourceHistorial" matSort class="w-100 table">
                <ng-container matColumnDef="ACCION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    ACCION
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.ACCION }}</td>
                </ng-container>
                <ng-container matColumnDef="RESULTADO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    RESULTADO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.RESULTADO }}</td>
                </ng-container>
                <ng-container matColumnDef="TIPIFICACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    TIPIFICACION
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.TIPIFICACION }}</td>
                </ng-container>
                <ng-container matColumnDef="SUBTIPIFICACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    SUBTIPIFICACION
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.SUBTIPIFICACION }}</td>
                </ng-container>
                <ng-container matColumnDef="TELEFONO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    TELEFONO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.TELEFONO }}</td>
                </ng-container>
                <ng-container matColumnDef="COMENTARIO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    COMENTARIO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.COMENTARIO }}</td>
                </ng-container>
                <ng-container matColumnDef="CREACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CREACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.CREACION | date:"dd/MM/YYYY"}}
                    {{ element.CREACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="USUARIO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    USUARIO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.USUARIO }}</td>
                </ng-container>
                <ng-container matColumnDef="TIPO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    TIPO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.TIPO }}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="ColumnasHistorial"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasHistorial"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="9">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <mat-paginator #paginatorHistorial="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="10">
              </mat-paginator>
            </div>

            <!-- tabla telefonos -->
            <!-- <table class="table" *ngIf="!tablaTelefonos">
            <thead>
              <tr>
                <th>Telefono</th>
                <th>Tipo Telefono</th>
                <th>Mensajes</th>
                <th>IVR</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let dato of datosFiltradosTelefonos | slice :(paginaActual - 1) * tamanoPagina : paginaActual * tamanoPagina">
                <td>{{ dato.TELEFONO }}</td>
                <td>{{ dato.TIPO }}</td>
                <td>mensaje</td>
                <td>ivr</td>
              </tr>
            </tbody>
          </table> -->
            <!-- <div class="table-responsive" *ngIf="!tablaTelefonos"> -->
            <div class="table-responsive" [ngClass]="{'hidden': !tablaTelefonos}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="Filtrar($event, DataSourceTelefonos)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourceTelefonos" matSort class="w-100 table">
                <ng-container matColumnDef="TELEFONO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    TELEFONO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.TELEFONO }}</td>
                </ng-container>
                <ng-container matColumnDef="TIPO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    TIPO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.TIPO }}</td>
                </ng-container>

                <ng-container matColumnDef="SMS">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    MENSAJES
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-checkbox color="success" [(ngModel)]="element.SMS"
                      (click)="changeSMS(element.TELEFONOID,element.SMS)"></mat-checkbox>
                  </td>
                </ng-container>

                <ng-container matColumnDef="IVR">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    IVR
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-checkbox color="primary" [(ngModel)]="element.IVR"
                      (click)="changeIVR(element.TELEFONOID,element.IVR)"></mat-checkbox>
                  </td>
                </ng-container>
                <ng-container matColumnDef="CREACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CREACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.CREACION | date:"dd/MM/YYYY"}}
                    {{ element.CREACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="ACTUALIZACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    ACTUALIZACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.ACTUALIZACION | date:"dd/MM/YYYY"}}
                    {{ element.ACTUALIZACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="OPCIONES">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    OPCIONES
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-button-toggle-group>
                      <mat-button-toggle (click)="OpenDialogEditar(element)" style="margin: -10px;">
                        <mat-icon class="text-primary">edit</mat-icon>
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </td>
                </ng-container>
                <ng-container matColumnDef="ENVIARSMS">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    ENVIARSMS
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-button-toggle-group>
                      <mat-button-toggle (click)="EnviarSMS(element)" style="margin: -10px;">
                        <mat-icon class="text-success">send</mat-icon>
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="ColumnasTelefonos"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasTelefonos"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="7">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <button class="btn btn-primary" (click)="OpenDialogTelefonos()">Agregar Telefono</button>
              <mat-paginator #paginatorTelefonos="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="10">
              </mat-paginator>
            </div>

            <!-- tabla direccioens -->
            <div class="table-responsive" [ngClass]="{'hidden': !tablaDirecciones}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="Filtrar($event, DataSourceDirecciones)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourceDirecciones" matSort class="w-100 table">
                <ng-container matColumnDef="COLONIA">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    COLONIA
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.COLONIA }}</td>
                </ng-container>
                <ng-container matColumnDef="DEPARTAMENTO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    DEPARTAMENTO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.DEPARTAMENTO }}</td>
                </ng-container>

                <ng-container matColumnDef="DIRECCION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    DIRECCION
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.DIRECCION }}</td>
                </ng-container>
                <ng-container matColumnDef="MUNICIPIO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    MUNICIPIO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.MUNICIPIO }}</td>
                </ng-container>
                <ng-container matColumnDef="TIPODIRECCION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    TIPODIRECCION
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.TIPODIRECCION }}</td>
                </ng-container>
                <ng-container matColumnDef="CREACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CREACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.CREACION | date:"dd/MM/YYYY"}}
                    {{ element.CREACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="ACTUALIZACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    ACTUALIZACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.ACTUALIZACION | date:"dd/MM/YYYY"}}
                    {{ element.ACTUALIZACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="OPCIONES">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    OPCIONES
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-button-toggle-group>
                      <mat-button-toggle (click)="OpenDialogEditarDireccion(element)" style="margin: -10px;">
                        <mat-icon class="text-primary" title="Editar el Registro">edit</mat-icon>
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="ColumnasDirecciones"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasDirecciones"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="8">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <button class="btn btn-primary" (click)="OpenDialogDirecciones()">Agregar Direccion</button>
              <mat-paginator #paginatorDirecciones="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="10">
              </mat-paginator>
            </div>

            <div class="table-responsive" [ngClass]="{'hidden': !tablaCorreos}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="Filtrar($event,DataSourceCorreos)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourceCorreos" matSort class="w-100 table">
                <ng-container matColumnDef="CORREO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CORREO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.CORREO }}</td>
                </ng-container>
                <ng-container matColumnDef="TIPOCORREO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    TIPOCORREO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.TIPOCORREO }}</td>
                </ng-container>
                <ng-container matColumnDef="CREACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CREACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.CREACION | date:"dd/MM/YYYY"}}
                    {{ element.CREACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="ACTUALIZACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    ACTUALIZACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.ACTUALIZACION | date:"dd/MM/YYYY"}}
                    {{ element.ACTUALIZACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="OPCIONES">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    OPCIONES
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-button-toggle-group>
                      <mat-button-toggle (click)="OpenDialogEditarCorreo(element)" style="margin: -10px;">
                        <mat-icon class="text-primary">edit</mat-icon>
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </td>
                </ng-container>
                <ng-container matColumnDef="ENVIARCORREO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    ENVIAR CORREO
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-button-toggle-group>
                      <mat-button-toggle (click)="EnviarCorreo(element)" style="margin: -10px;">
                        <mat-icon class="text-success">send</mat-icon>
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="ColumnasCorreos"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasCorreos"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="5">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <button class="btn btn-primary" (click)="OpenDialogCorreos()">Agregar Correo</button>
              <mat-paginator #paginatorCorreos="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="10">
              </mat-paginator>
            </div>


            <!-- Tabla promesas -->
            <div class="table-responsive" [ngClass]="{'hidden': !tablaPromesas}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="Filtrar($event, DataSourcePromesas)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourcePromesas" matSort class="w-100 table">
                <!-- <ng-container matColumnDef="CARTERAID">
                <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                  CARTERAID
                </th>
                <td mat-cell *matCellDef="let element">{{ element.CARTERAID }}</td>
              </ng-container> -->
                <ng-container matColumnDef="ESTADO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    ESTADO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.ESTADO }}</td>
                </ng-container>
                <ng-container matColumnDef="MONTO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    MONTO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.MONTO }}</td>
                </ng-container>
                <ng-container matColumnDef="FECHA">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    FECHA
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.FECHA | date:"dd/MM/YYYY"}}
                    <!-- {{ element.FECHA | date:"hh:mm:ss"}} -->
                    <!-- {{ element.FECHA }} -->
                  </td>
                </ng-container>
                <ng-container matColumnDef="CREACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CREACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.CREACION | date:"dd/MM/YYYY"}}
                    {{ element.CREACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="ColumnasPromesas"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasPromesas"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="3">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <mat-paginator #paginatorPromesas="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="10">
              </mat-paginator>
            </div>

            <!-- tabla razon mora -->
            <div class="table-responsive" [ngClass]="{'hidden': !tablaRazonMora}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="Filtrar($event,DataSourceRazonMora)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourceRazonMora" matSort class="w-100 table">
                <!-- 'RAZON','FECHA','CREACION' -->
                <ng-container matColumnDef="RAZON">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    RAZON
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.RAZON }}</td>
                </ng-container>

                <ng-container matColumnDef="CREACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CREACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.CREACION | date:"dd/MM/YYYY"}}
                    {{ element.CREACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="ColumnasRazonMora"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasRazonMora"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="5">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <mat-paginator #paginatorRazonMora="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="10">
              </mat-paginator>
            </div>

            <!-- tabla pagos -->
            <div class="table-responsive" [ngClass]="{'hidden': !tablaPagos}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="Filtrar($event,DataSourcePagos)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourcePagos" matSort class="w-100 table">
                <ng-container matColumnDef="MONTO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    MONTO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.MONTO }}</td>
                </ng-container>

                <ng-container matColumnDef="FECHA">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    FECHA
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.FECHA | date:"dd/MM/YYYY"}}
                    {{ element.FECHA | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>



                <tr mat-header-row *matHeaderRowDef="ColumnasPagos"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasPagos"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="5">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <mat-paginator #paginatorPagos="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]" [pageSize]="10">
              </mat-paginator>
            </div>

            <!-- tabla Confirmaciones -->
            <div class="table-responsive" [ngClass]="{'hidden': !tablaConfirmaciones}">
              <mat-form-field class="w-100 mat-form-field-underline-none">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="Filtrar($event,DataSourceConfirmaciones)" #input />
              </mat-form-field>
              <table mat-table [dataSource]="DataSourceConfirmaciones" matSort class="w-100 table">
                <ng-container matColumnDef="MONTO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    MONTO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.MONTO }}</td>
                </ng-container>
                <ng-container matColumnDef="FECHA">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    FECHA
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.FECHA | date:"dd/MM/YYYY"}}
                    {{ element.FECHA | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="USUARIO">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    USUARIO
                  </th>
                  <td mat-cell *matCellDef="let element">{{ element.USUARIO }}</td>
                </ng-container>
                <ng-container matColumnDef="CREACION">
                  <th mat-header-cell *matHeaderCellDef="" mat-sort-header>
                    CREACION
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.CREACION | date:"dd/MM/YYYY"}}
                    {{ element.CREACION | date:"hh:mm:ss":"GMT / UTC"}}
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="ColumnasConfirmaciones"></tr>
                <tr mat-row *matRowDef="let row; columns: ColumnasConfirmaciones"></tr>
                <tr class="mt-row" *matNoDataRow="">
                  <td class="mat-cell" colspan="4">
                    No se encontraron datos para la tabla
                  </td>
                </tr>
              </table>
              <button class="btn btn-primary" (click)="OpenDialogConfirmaciones()">Agregar Confirmacion</button>
              <mat-paginator #paginatorConfirmaciones="matPaginator" [pageSizeOptions]="[10, 20, 50, 100]"
                [pageSize]="10">
              </mat-paginator>
            </div>

            <!-- tabla social -->
            <div class="row mt-3" [ngClass]="{'hidden': !tablaSocial}">
              <div class="col-lg-12">
                <mat-form-field appearance="outline" class="w-50 px-1">
                  <mat-label>Correo</mat-label>
                  <!-- [formControl]="telefonoControl" -->
                  <mat-select [(ngModel)]="correoIDSocial">
                    <mat-option></mat-option>
                    <mat-option *ngFor="let accion of ListaCorreos" [value]="accion.CORREOID">
                      {{ accion.CORREO }}
                    </mat-option>
                  </mat-select>
                  <!-- <mat-error *ngIf="telefonoControl.hasError('required')">El telefono es obligatorio</mat-error>
                  <mat-error *ngIf="telefonoControl.hasError('min')">El telefono es obligatorio</mat-error> -->
                </mat-form-field>
                <button class="btn btn-primary" (click)="EnviarCorreo(correoIDSocial)">Enviar Correo</button>
              </div>
              <div class="col-lg-12">
                <mat-form-field appearance="outline" class="w-25 px-1">
                  <mat-label>Telefono</mat-label>
                  <mat-select [(ngModel)]="telefonoIDSocial">
                    <mat-option></mat-option>
                    <mat-option *ngFor="let accion of ListaTelefonos" [value]="accion.TELEFONOID"
                      (click)="TraerChatWhatsapp(accion.TELEFONOID)">
                      {{ accion.TELEFONO }}
                    </mat-option>
                  </mat-select>
                  <!-- <mat-error *ngIf="telefonoControl.hasError('required')">El telefono es obligatorio</mat-error>
                  <mat-error *ngIf="telefonoControl.hasError('min')">El telefono es obligatorio</mat-error> -->
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-25 px-1">
                  <mat-label>Plantilla</mat-label>
                  <mat-select [(ngModel)]="plantillaID">
                    <mat-option></mat-option>
                    <mat-option *ngFor="let accion of ListaPlantillas" [value]="accion.PLANTILLAID">
                      {{ accion.PLANTILLA }}
                    </mat-option>
                  </mat-select>
                  <!-- <mat-error *ngIf="telefonoControl.hasError('required')">El telefono es obligatorio</mat-error>
                  <mat-error *ngIf="telefonoControl.hasError('min')">El telefono es obligatorio</mat-error> -->
                </mat-form-field>
                <button class="btn btn-primary" (click)="EnviarSMS(telefonoIDSocial)">Enviar SMS</button>
              </div>
              <div class="col-lg-12" [ngClass]="{'hidden': telefonoIDSocial == 0 || telefonoIDSocial == undefined}">
                <!-- <mat-card>
                  <mat-card-content>
                    <div *ngFor="let chat of chatWhatsapp"
                      [ngClass]="{'message-in': chat.type === 'IN', 'message-out': chat.type === 'OUT'}">
                      <div class="message-content">
                        {{ chat.text }}
                      </div>
                      <div class="message-date">
                        {{ chat.process_date | date: 'shortTime' }}
                      </div>
                    </div>
                  </mat-card-content>


                  <div class="message-input">
                    <input [(ngModel)]="nuevoMensaje" placeholder="Escribe un mensaje...">
                    <button (click)="enviarMensaje()">Enviar</button>
                  </div>
                </mat-card> -->
                <mat-card>
                  <!-- style="max-height: 400px; overflow: auto;"   -->
                  <!-- <mat-card-content style="max-height: 400px;overflow: scroll; " #scrollMe [scrollTop]="scrollMe.scrollHeight"> -->
                  <!-- <mat-card-content style="max-height: 400px; overflow: scroll;" #scrollContainer> -->
                  <mat-card-content style="max-height: 400px; overflow-y:scroll;" #scrollMe
                    [scrollTop]="scrollMe.scrollHeight">
                    <ng-container *ngFor="let chat of chatWhatsapp; let i = index">
                      <ng-container *ngIf="i === 0 || chat.creation_date !== chatWhatsapp[i - 1].creation_date">
                        <div class="message-date-header"
                          [ngClass]="{'message-in': chat.type === 'IN', 'message-out': chat.type === 'OUT'}">
                          <!-- {{ chat.creation_date | date: 'EEEE, MMMM d, y' }} -->
                          {{ chat.creation_date | date:'fullDate':'':'es' }}
                        </div>
                      </ng-container>

                      <div [ngClass]="{'message-in': chat.type === 'IN', 'message-out': chat.type === 'OUT'}">
                        <div class="message-content">
                          {{ chat.text }}
                        </div>
                        <div class="message-date">
                          {{ chat.creation_date | date: 'shortTime' }}
                          <!-- {{ chat.creation_date | date:"hh:mm":"GMT / UTC"}} -->
                          <!-- {{ chat.creation_date }} -->
                        </div>
                      </div>
                    </ng-container>
                  </mat-card-content>

                  <div class="message-input">
                    <input [(ngModel)]="nuevoMensaje" placeholder="Escribe un mensaje...">
                    <button (click)="enviarMensaje()">Enviar</button>
                  </div>
                </mat-card>


              </div>
            </div>

            <!-- tabla social -->
            <div class="row mt-3" [ngClass]="{'hidden': !tablaWhatsapp}">
              <h1>whatsapp</h1>


              <!-- <div class="number-list">
                <ul>
                  <li *ngFor="let number of uniqueNumbers">
                    <button (click)="selectNumber(number)">{{ number }}</button>
                  </li>
                </ul>
              </div>
              <div class="chat-window">
                <div *ngIf="selectedNumber">
                  <h2>Conversación con el número: {{ selectedNumber }}</h2>
                  <div class="chat">
                    <div *ngFor="let chat of selectedChats" class="message">
                      <div *ngIf="chat.type === 'IN'" class="incoming" [ngClass]="{ 'image-message': isImageURL(chat.text) }">
                        <img *ngIf="isImageURL(chat.text)" [src]="chat.text" width="100px" alt="Imagen">
                        <span *ngIf="!isImageURL(chat.text)">{{ chat.text }}</span>
                      </div>
                      <div *ngIf="chat.type === 'OUT'" class="outgoing">{{ chat.text }}</div>
                    </div>
                  </div>
                </div>
              </div> -->

              <div class="number-list">
                <ul>
                  <li *ngFor="let number of uniqueNumbers">
                    <button (click)="selectNumber(number)">{{ number }}</button>
                  </li>
                </ul>
              </div>
              <div class="chat-window">
                <div *ngIf="selectedNumber">
                  <h2>Conversación con el número: {{ selectedNumber }}</h2>
                  <div class="chat">
                    <div *ngFor="let chat of selectedChats" class="message">
                      <div *ngIf="chat.type === 'IN'" class="incoming" [ngClass]="{ 'image-message': isImageURL(chat.text) }">
                        <img
                          *ngIf="isImageURL(chat.text)"
                          [src]="chat.text"
                          alt="Imagen"
                          width="100px"
                          (click)="expandImage(chat.text)"
                        >
                        <span *ngIf="!isImageURL(chat.text)">{{ chat.text }}</span>
                      </div>
                      <div *ngIf="chat.type === 'OUT'" class="outgoing">{{ chat.text }}</div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Div para mostrar la imagen ampliada -->
              <div class="expanded-image" *ngIf="expandedImage">
                <img [src]="expandedImage" alt="Imagen Ampliada" (click)="closeExpandedImage()">
              </div>
              
              





            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- fixed-container -->
  <div class="col-lg-4 col-md-4 col-sm-4 mx-2 my-0">
    <mat-card>
      <mat-card-header>
        <!-- <div > -->
        <h2 style="width: 80%;">Gestión de contacto</h2>
        <!-- </div>
          <div style="float: right;"> -->
        <!-- style="float: righ;margin-left: 30%;" -->
        <h2>{{ tiempoTranscurrido }}</h2>
        <!-- </div> -->

      </mat-card-header>
      <mat-card-content>
        <div class="col-lg-12">
          <mat-form-field appearance="outline" class="w-50 px-1">
            <mat-label>Telefono</mat-label>
            <mat-icon color="primary" (click)="OpenDialogTelefonos()" matSuffix>add</mat-icon>
            <mat-select [(ngModel)]="telefonoID" [formControl]="telefonoControl" [disabled]="selectDisabled">

              <mat-option></mat-option>
              <mat-option *ngFor="let accion of ListaTelefonos" [value]="accion.TELEFONOID">
                {{ accion.TELEFONO }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="telefonoControl.hasError('required')">El telefono es obligatorio</mat-error>
            <mat-error *ngIf="telefonoControl.hasError('min')">El telefono es obligatorio</mat-error>
          </mat-form-field>


          <!-- appearance="outline" -->
          <mat-form-field appearance="outline" class="w-50 px-1 ">
            <mat-label>Accion</mat-label>
            <mat-select [(ngModel)]="accionID" [formControl]="accionControl" (ngModelChange)="onAccionChange()">
              <mat-option></mat-option>
              <mat-option *ngFor="let accion of ListaAccion" [value]="accion.ACCIONID">
                {{ accion.ACCION }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="accionControl.hasError('required')">La accion es obligatoria</mat-error>
            <mat-error *ngIf="accionControl.hasError('min')">La accion es obligatoria</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-50 px-1 ">
            <mat-label>Resultado</mat-label>
            <mat-select [(ngModel)]="resultadoID" [formControl]="resultadoControl">
              <mat-option></mat-option>
              <mat-option *ngFor="let resultado of ListaResultado" [value]="resultado.RESULTADOID">
                {{ resultado.RESULTADO }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="resultadoControl.hasError('required')">La accion es obligatoria</mat-error>
            <mat-error *ngIf="resultadoControl.hasError('min')">La accion es obligatoria</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-50 px-1 ">
            <mat-label>Tipificacion</mat-label>
            <mat-select [(ngModel)]="tipificacionID" (ngModelChange)="onTipificacionChange()"
              [formControl]="tipificacionControl">
              <mat-option></mat-option>
              <mat-option *ngFor="let tipificacion of ListaTipificacion" [value]="tipificacion.TIPIFICACIONID">
                {{ tipificacion.TIPIFICACION }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="tipificacionControl.hasError('required')">La tipificacion es obligatoria</mat-error>
            <mat-error *ngIf="tipificacionControl.hasError('min')">La tipificacion es obligatoria</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-50 px-1 ">
            <mat-label>Subtipificacion</mat-label>
            <mat-select [(ngModel)]="subtipificacionID" [formControl]="subtipificacionControl">
              <mat-option></mat-option>
              <mat-option *ngFor="let stipificacion of ListaSubtipificacion" [value]="stipificacion.SUBTIPIFICACIONID">
                {{ stipificacion.SUBTIPIFICACION }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="subtipificacionControl.hasError('required')">La subtipificacion es obligatoria</mat-error>
            <mat-error *ngIf="subtipificacionControl.hasError('min')">La subtipificacion es obligatoria</mat-error>
          </mat-form-field>

          <div [ngClass]="{'hidden': !divPromesa}">

            <mat-form-field appearance="outline" class="w-50 px-1">
              <mat-label>Fecha Promesa</mat-label>
              <input matInput readonly [formControl]="fechaPromesaControl" [matDatepicker]="picker2"
                [(ngModel)]="fechaPromesa" [min]="getFechaMinima()" [max]="getFechaMaxima()" (click)="picker2.open()">
              <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
              <mat-datepicker #picker2 disabled="false"></mat-datepicker>
              <mat-error *ngIf="fechaPromesaControl.hasError('required')">La fecha de promesa es obligatoria</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-50 px-1">
              <mat-label>Valor Promesa</mat-label>
              <input matInput [(ngModel)]="valorPromesa" type="number" matInput [formControl]="promesaControl" />
              <mat-error *ngIf="promesaControl.hasError('required')">El monto es obligatorio</mat-error>
              <mat-error *ngIf="promesaControl.hasError('min')">El monto no es aprobado</mat-error>
            </mat-form-field>
          </div>


          <mat-form-field appearance="outline" class="w-50 px-1 ">
            <mat-label>Razon de Mora</mat-label>
            <mat-select [(ngModel)]="razonMoraID" [formControl]="razonMoraControl">
              <mat-option></mat-option>
              <mat-option *ngFor="let tipificacion of OpcionesRazonMora" [value]="tipificacion.RAZONMORAID">
                {{ tipificacion.RAZON }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="razonMoraControl.hasError('required')">La subtipificacion es obligatoria</mat-error>
            <mat-error *ngIf="razonMoraControl.hasError('min')">La subtipificacion es obligatoria</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-50 px-1">
            <mat-label>Fecha Proxima Gestion</mat-label>
            <input matInput readonly [matDatepicker]="picker" [(ngModel)]="fechaProximaGestion" [min]="getFechaMinima()"
              (click)="picker.open()">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>



          <div class="col-lg-12 w-100">
            <mat-form-field appearance="outline" class="w-100 px-1">
              <mat-label>Comentario</mat-label>
              <textarea matInput rows="2" [(ngModel)]="observacion"></textarea>
            </mat-form-field>

            <mat-card-actions>
              <button mat-raised-button class="bgops-indigo txtwhite mx-2" type="submit" (click)="SaveGestion()">
                Guardar
              </button>
              <button class="btn btn-success mx-2" (click)="confirmarSiguiente()">
                Siguiente
              </button>
            </mat-card-actions>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>